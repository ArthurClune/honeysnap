$Id$

Installing Honeysnap
--------------------
Python 2.4 or greater is required

Dependencies:

General:
    
libpcap		   		 		http://sourceforge.net/projects/libpcap/

Python modules:

irclib 0.4.6 or greater  	http://python-irclib.sourceforge.net/
pypcap 1.1 or greater  		http://www.monkey.org/~dugsong/pypcap/
dpkt		 	  			http://monkey.org/~dugsong/dpkt/
magic						http://www.demonseed.net/~jp/code/magic.py

The rest of this document is in three parts:

1) Installation on a Linux/Unix/OS X Workstation
2) Installation on Windows
3) Installation on a Honeywapp
      
1) Installation on a workstation
--------------------------------
                  
You will need python 2.4 and its header file.

For libpcap, either install from the website, or, for most UNIX-like
systems, it should be in your package management system (apt-get, yum,
DarwinPorts etc.). You will need libcap and also libpcap-devel if that
is listed separately.
                                             
e.g. On Debian/Ubuntu

$ sudo apt-get install python24-dev
$ sudo apt-get install libpcap libpcap-dev

On OS X python2.4 and libpcap are available from either Fink
or MacPorts (previously DarwinPorts)

Next install pypcap. Download pypcap from 
http://www.monkey.org/~dugsong/pypcap

$ tar -xzf pypcap-1.1.tar.gz
$ cd pypcap-1.1
$ python setup.py config
$ python setup.py build && sudo python setup.py install
$ cd ..

You should then be able to install Honeysnap and all its remaining
dependencies (provided you have a network connection) by untar'ing 
the honeysnap distribution, cd'ing into the resulting directory and 
running setup.py install. E.g. for version 1.0.4:

$ tar xvzf honeysnap-1.0.4
$ cd honeysnap-1.0.4
$ sudo python setup.py install
       
If you already have easy_install installed, you can simplify this set
further to just

$ sudo easy_install honeysnap-1.0.4.tar.gz

If you already have an older version of easy_install installed, you
can upgrade it if needed with:

$ sudo easy_install --upgrade setuptools    

Please note that this will install the honeysnap script into your
PATH, usually in /usr/bin. If this isn't what you want, specify
--script-dir. e.g

$ sudo python setup.py --script-dir=/usr/local/bin install

2) Installation on Windows
--------------------------

Download  and install the following, in order.

	* Python 2.4 (from http://www.python.org/downloads). You can install
	from the Windows MSI installer linked from that page.

	* winpcap from
	http://www.winpcap.org/install/default.htm  
	
	* pypcap from http://www.moneyket.org/~dugsong/pypcap
	You need to download and run the 'Windows Python 2.4 Installer'

To make Python easily available on the command line, right click
on "My Computer" and select Properties. Then go to Advanced and
choose Environment Variables. Add to the end of the PATH variable 

;%SystemRoot%\Python24;%SystemRoot%\Python24\Scripts

(assuming you installed Python to the default location)

If you don't already have setuptools installed, you'll need
to download ez_setup.py from

http://peak.telecommunity.com/dist/ez_setup.py

and run it. This will install easy_setup. Finally run

easy_install honeysnap-1.0.4.zip
                                                    
This should download and install honeysnap and all its
dependencies.
                 
3) Installation on a honeywall
------------------------------

Note: You cannot install in the same way as for a workstation on
a production honeywall, as it has no gcc compiler. Instead, do:

	$ sudo yum install gcc 

Then you must install python 2.4 or later. libpcap will already be installed, so 
only the python parts need installing.

For Fedora Core 3, create "/etc/yum.repos.d/python24.repo" with the following lines:

  [python24]
  name=Fedora Core $releasever - $basearch - Python 2.4
  baseurl=http://www.python.org/ftp/python/2.4/rpms/fedora-3/
  enabled=1
  gpgcheck=1

Add this line to "/etc/yum.repos.d/python24.repo" and yum
will prompt for import of non-existant KRUD-GPG-KEY:

gpgkey=http://www.python.org/ftp/python/2.4/rpms/KRUD-GPG-KEY

Install Python 2.4 by running: 

$ sudo yum install python2.4

Then follow the instructions for a workstation asabove, but replacing calls to 'python' 
with 'python2.4'. e.g.

$ sudo python2.4 setup.py install

Running honeysnap
=================

Try to execute 'honeysnap':

	$ honeysnap

You should see:

	Usage:
	honeysnap.py <config file>

	Please see the accompanying documentation for instructions on
	configuration.

       
Some notes on python 2.5 and OS/X
=================================

If upgrading Python on a Mac, and you hit problems, try getting the Python pkg 
from www.python.org, not from Darwin ports.

Get pycap from Dug Song's site as Mac pkg, do not install from source. 
  http://monkey.org/~dugsong/pypcap/pypcap-1.1-fat.dmg


